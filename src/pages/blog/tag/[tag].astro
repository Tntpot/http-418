---
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
   const posts = await getCollection('blog');
   const tags = Array.from(new Set(posts.flatMap((post) => post.data.tags)));
   return tags.map((tag) => ({ params: { tag } }));
}

const { tag } = Astro.params;
const posts = (await getCollection('blog')).filter((post) => post.data.tags.includes(tag));
---

<h1>This should be a list of blog posts?</h1>
{posts.map((post) => <i> {post.data.title}, </i>)}
