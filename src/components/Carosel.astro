---
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
   (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
// for (var i = 0; i <= 50; i++) {
//     posts.push({id: `test${i}`, data: { title: `titletest${i}`}});
// }
---

<div class="carosel">
    {posts.map((post) => {
    return <article>
        <a href=`/blog/${post.id}`>
            {post.data.heroImage && (
            <Image width={720} height={360} src={post.data.heroImage} alt="" />
            )}
            <span>{post.data.title}</span>
        </a>
    </article>
    })}
</div>

<style>
    .carosel {
        display: grid;
        justify-content: center;
        gap: 1rem;
        max-height: 35svh;
        min-height: 400px;
        grid-auto-flow: row;
        grid-auto-rows: 1fr 1fr;
        overflow-y: scroll;
        scroll-snap-type: y mandatory;
        scroll-padding: 1rem;
    }

    .carosel > * {
        scroll-snap-align: start;
        padding: 1rem 1rem 0rem 1rem;
        text-align: center;
        vertical-align: middle;
        display: flex;
        flex-direction: column;
    }

    /* .carosel > *:last-child { */
    /*     border: 1px solid red; */
    /* } */

    .carosel span {
        display: flex;
        flex: 1;
        justify-self: center;
        padding: 0.5rem 0rem;
    }
</style>
